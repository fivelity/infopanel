<Page
    x:Class="InfoPanel.Views.Pages.ProfilesPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="using:InfoPanel"
    d:DesignHeight="800"
    d:DesignWidth="1200"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid MaxWidth="1400" Margin="20,20,20,20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header Buttons -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,0,0,20">
            <Button x:Name="ButtonImport" Content="Import Profile" Click="ButtonImportProfile_Click" />
            <Button x:Name="ButtonAdd" Content="New Profile" Style="{ThemeResource AccentButtonStyle}" Click="ButtonAdd_Click" />
        </StackPanel>

        <!-- Profiles Grid -->
        <GridView
            x:Name="GridViewProfiles"
            Grid.Row="1"
            SelectionMode="Single"
            SelectionChanged="GridViewProfiles_SelectionChanged">
            <GridView.ItemTemplate>
                <DataTemplate>
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="16" Width="280" Height="200" Margin="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" VerticalAlignment="Center" HorizontalAlignment="Center">
                                <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold" HorizontalAlignment="Center" />
                                <TextBlock FontSize="12" Opacity="0.7" HorizontalAlignment="Center">
                                    <Run Text="{Binding Width}" />
                                    <Run Text=" x " />
                                    <Run Text="{Binding Height}" />
                                </TextBlock>
                            </StackPanel>
                            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" Spacing="5">
                                <ToggleButton IsChecked="{Binding Active, Mode=TwoWay}" ToolTipService.ToolTip="Active">
                                    <SymbolIcon Symbol="Play" />
                                </ToggleButton>
                            </StackPanel>
                        </Grid>
                    </Border>
                </DataTemplate>
            </GridView.ItemTemplate>
        </GridView>

        <!-- Profile Editor Expander -->
        <Expander Grid.Row="2" x:Name="ExpanderProfile" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" Margin="0,20,0,0" IsExpanded="True">
            <Expander.Header>
                <TextBlock x:Name="TextBlockProfileHeader" Text="Select a profile" FontWeight="SemiBold" />
            </Expander.Header>
            
            <Grid x:Name="GridProfileEditor" Padding="10" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1.5*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Column 1: Basic Settings -->
                <StackPanel Grid.Column="0" Margin="0,0,10,0" Spacing="10">
                    <TextBox x:Name="TextBoxName" Header="Name" MaxLength="25" />
                    
                    <StackPanel>
                        <TextBlock x:Name="TextBlockTargetWindow" FontSize="12" Opacity="0.7" />
                        <TextBlock x:Name="TextBlockDeviceName" FontSize="11" Opacity="0.5" />
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Spacing="10">
                        <ToggleButton x:Name="ToggleStrictMatching" ToolTipService.ToolTip="Strict window matching">
                            <SymbolIcon Symbol="ProtectedDocument" />
                        </ToggleButton>
                        <ToggleButton x:Name="ToggleTopmost" ToolTipService.ToolTip="Keep on top">
                            <SymbolIcon Symbol="Pin" />
                        </ToggleButton>
                        <ToggleButton x:Name="ToggleDrag" ToolTipService.ToolTip="Enable drag">
                            <SymbolIcon Symbol="MoveToFolder" />
                        </ToggleButton>
                        <ToggleButton x:Name="ToggleResize" ToolTipService.ToolTip="Enable resize">
                            <SymbolIcon Symbol="FullScreen" />
                        </ToggleButton>
                    </StackPanel>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <NumberBox x:Name="NumberBoxWidth" Grid.Column="0" Header="Width" Minimum="0" Maximum="3840" SpinButtonPlacementMode="Compact" Margin="0,0,5,0" />
                        <NumberBox x:Name="NumberBoxHeight" Grid.Column="1" Header="Height" Minimum="0" Maximum="3840" SpinButtonPlacementMode="Compact" Margin="5,0,5,0" />
                        <Button Grid.Column="2" VerticalAlignment="Bottom" Click="ButtonMaximise_Click" ToolTipService.ToolTip="Fill screen" Margin="5,0,0,0">
                            <SymbolIcon Symbol="FullScreen" />
                        </Button>
                    </Grid>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <NumberBox x:Name="NumberBoxX" Grid.Column="0" Header="X" SpinButtonPlacementMode="Compact" Margin="0,0,5,0" />
                        <NumberBox x:Name="NumberBoxY" Grid.Column="1" Header="Y" SpinButtonPlacementMode="Compact" Margin="5,0,5,0" />
                        <Button Grid.Column="2" VerticalAlignment="Bottom" Click="ButtonResetPosition_Click" ToolTipService.ToolTip="Reset position" Margin="5,0,0,0">
                            <SymbolIcon Symbol="Refresh" />
                        </Button>
                    </Grid>
                </StackPanel>

                <!-- Column 2: Appearance -->
                <StackPanel Grid.Column="1" Margin="10,0,10,0" Spacing="10">
                    <StackPanel>
                        <TextBlock Text="Background Color" FontSize="12" Margin="0,0,0,5" />
                        <ColorPicker x:Name="ColorPickerBackground" ColorSpectrumShape="Ring" IsMoreButtonVisible="False" IsColorSliderVisible="True" IsColorChannelTextInputVisible="False" IsHexInputVisible="True" />
                    </StackPanel>

                    <StackPanel>
                        <TextBlock Text="Default Text Color" FontSize="12" Margin="0,0,0,5" />
                        <ColorPicker x:Name="ColorPickerText" ColorSpectrumShape="Ring" IsMoreButtonVisible="False" IsColorSliderVisible="True" IsColorChannelTextInputVisible="False" IsHexInputVisible="True" />
                    </StackPanel>

                    <ComboBox x:Name="ComboBoxFont" Header="Default Font" HorizontalAlignment="Stretch" />
                    
                    <NumberBox x:Name="NumberBoxFontSize" Header="Default Font Size" Minimum="1" SpinButtonPlacementMode="Compact" />
                </StackPanel>

                <!-- Column 3: Options -->
                <StackPanel Grid.Column="2" Margin="10,0,0,0" Spacing="10">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="12">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Show Panel Overlay" VerticalAlignment="Center" />
                            <ToggleSwitch x:Name="ToggleShowFps" Grid.Column="1" />
                        </Grid>
                    </Border>

                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="12">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="Use OpenGL (GPU)" VerticalAlignment="Center" />
                            <ToggleSwitch x:Name="ToggleOpenGL" Grid.Column="1" />
                        </Grid>
                    </Border>

                    <NumberBox x:Name="NumberBoxFontScale" Header="Global Font Scale" Minimum="0.1" Maximum="10" SmallChange="0.01" LargeChange="0.1" SpinButtonPlacementMode="Compact" />

                    <!-- Action Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Spacing="10" Margin="0,20,0,0">
                        <Button Content="Save" Style="{ThemeResource AccentButtonStyle}" Click="ButtonSave_Click" />
                        <Button Content="Revert" Click="ButtonReload_Click" />
                        <Button Content="Close" Click="ButtonClose_Click" />
                    </StackPanel>
                </StackPanel>
            </Grid>
        </Expander>

        <!-- Guide Panel (shown when no profile selected) -->
        <Border x:Name="BorderGuide" Grid.Row="2" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}" CornerRadius="8" Padding="20" Margin="0,20,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                    <TextBlock Text="Profile Guide:" FontWeight="Bold" Margin="0,0,0,10" />
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8">
                        <Run FontWeight="Bold">1.</Run>
                        <Run Text=" Set profile settings such as width, height, background color and typography defaults." />
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,10,0,0">
                        <Run FontWeight="Bold">2.</Run>
                        <Run Text=" Mouse over icons to see more details." />
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,10,0,0">
                        <Run FontWeight="Bold">3.</Run>
                        <Run Text=" OpenGL uses your GPU for faster rendering up to 100 FPS." />
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Column="1" Margin="10,0,10,0">
                    <TextBlock Text="OpenGL Notes:" FontWeight="Bold" Margin="0,0,0,10" />
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8">
                        <Run FontWeight="Bold">1.</Run>
                        <Run Text=" OpenGL uses a different rendering engine. Fonts may appear differently." />
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,10,0,0">
                        <Run FontWeight="Bold">2.</Run>
                        <Run Text=" Adjust Font Scale for backward compatibility." />
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,10,0,0">
                        <Run FontWeight="Bold">3.</Run>
                        <Run Text=" Panel FPS shows rendering speed. Maximum is 100 FPS." />
                    </TextBlock>
                </StackPanel>

                <StackPanel Grid.Column="2" Margin="10,0,0,0">
                    <TextBlock Text="Additional Notes:" FontWeight="Bold" Margin="0,0,0,10" />
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8">
                        <Run FontWeight="Bold">1.</Run>
                        <Run Text=" This software is provided on a best effort basis." />
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,10,0,0">
                        <Run FontWeight="Bold">2.</Run>
                        <Run Text=" Performance depends on panel size and number of images/GIFs." />
                    </TextBlock>
                    <TextBlock TextWrapping="Wrap" FontSize="12" Foreground="OrangeRed" Margin="0,10,0,0">
                        <Run FontWeight="Bold">Remember to save your work!</Run>
                    </TextBlock>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>
